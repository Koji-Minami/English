# API接続セットアップ

## 概要
フロントエンドがバックエンドAPIと接続するためのセットアップ手順です。

## 必要な環境変数

### 1. 環境変数ファイルの作成
フロントエンドのルートディレクトリに `.env.local` ファイルを作成し、以下の内容を追加してください：

```env
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1
```

### 2. バックエンドの起動
バックエンドサーバーを起動してください：

```bash
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 3. フロントエンドの起動
フロントエンドサーバーを起動してください：

```bash
cd frontend
npm run dev
```

## 利用可能なAPIエンドポイント

### セッション管理
- `GET /api/v1/gemini_audio` - 新しいセッションを作成
- `POST /api/v1/finish_session/{session_id}` - セッションを終了

### Webページ管理
- `POST /api/v1/gemini_audio/{session_id}/webpage` - WebページのURLを追加

### 音声処理
- `POST /api/v1/gemini_audio/{session_id}` - 音声ファイルを送信して即座のレスポンスを取得

### 分析結果
- `GET /api/v1/analysis/{session_id}` - 文法分析結果を取得

## 機能

### 1. 音声録音
- ブラウザのマイクを使用して音声を録音
- 録音時間の表示
- 一時停止・再開機能

### 2. リアルタイム会話
- 音声をテキストに変換
- AIアシスタントからの応答
- 音声応答の再生

### 3. Webページ統合
- URLを入力してWebページの内容を会話に追加
- ページの内容に基づいた会話

### 4. 英語スキルアップ分析
- 発音・文法のアドバイス
- 代替表現の提案
- 有用なイディオムの紹介

## トラブルシューティング

### CORSエラー
バックエンドのCORS設定でフロントエンドのURLが許可されていることを確認してください。

### マイクアクセスエラー
ブラウザの設定でマイクへのアクセスが許可されていることを確認してください。

### API接続エラー
- バックエンドサーバーが起動していることを確認
- 環境変数の設定を確認
- ネットワーク接続を確認 